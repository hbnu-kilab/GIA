📊 처리할 질문 수 제한: 3
[INFO] Embedding device=cuda:1, batch_size=64
[INFO] Using collection: network_devices (count=0)
[INFO] AUTO_EMBED_XML_ON_EMPTY=True & empty collection → auto-embedding XML...
[INFO] Auto-embedding 6 XML files (batched)
[WARNING] CUDA OOM during embedding. Falling back to CPU with smaller batch size.
[INFO] Collection now has 6 documents

🎯 RAG 실험 시작 (top_k=5)
Processing 1/3 (k=5): SSH 접속이 가능한 장비 목록을 알려주세요....
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 103547 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 103547 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 103547 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 103547 문자
Processing 2/3 (k=5): SSH 접속이 불가능한 장비는 총 몇 대입니까?...
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 126656 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 126656 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 126656 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 126656 문자
Processing 3/3 (k=5): sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요....
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 102480 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 102480 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 102480 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 15
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 5
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 102480 문자
[INFO] Results saved: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag/results/rag_k5.json
✅ Top-K=5 완료! EM: 0.0000 F1: 0.4127
[INFO] Detailed log saved: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag/logs/rag_k5_detailed.json

🎯 RAG 실험 시작 (top_k=10)
Processing 1/3 (k=10): SSH 접속이 가능한 장비 목록을 알려주세요....
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
Processing 2/3 (k=10): SSH 접속이 불가능한 장비는 총 몇 대입니까?...
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
Processing 3/3 (k=10): sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요....
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 30
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
[INFO] Results saved: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag/results/rag_k10.json
✅ Top-K=10 완료! EM: 0.3333 F1: 0.5238
[INFO] Detailed log saved: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag/logs/rag_k10_detailed.json

🎯 RAG 실험 시작 (top_k=15)
Processing 1/3 (k=15): SSH 접속이 가능한 장비 목록을 알려주세요....
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 가능한 장비 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
Processing 2/3 (k=15): SSH 접속이 불가능한 장비는 총 몇 대입니까?...
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, SSH 접속이 불가능한 장비는 총 몇 대입니까?
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
Processing 3/3 (k=15): sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요....
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
🔍 ChromaDB 검색 결과:
  - Query: 단순 조회, sample10 장비와 iBGP로 연결된 피어들의 IP 주소 목록을 알려주세요.
  - 요청 문서 수: 45
  - 검색된 문서 수: 6
  - 초기 문서 수: 6
  - 최종 문서 수: 6
  - 관련 장비: ['unknown', 'unknown', 'unknown', 'unknown', 'unknown', 'unknown']
  - 컨텍스트 길이: 133079 문자
[INFO] Results saved: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag/results/rag_k15.json
✅ Top-K=15 완료! EM: 0.3333 F1: 0.4815
[INFO] Detailed log saved: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag/logs/rag_k15_detailed.json
[INFO] Results saved: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag/results/rag_all_results.json
✅ RAG 실험 모두 완료! 결과: Network-Management-System-main/pipeline_v2/experiment_results/experiment_20250908_113423/rag
