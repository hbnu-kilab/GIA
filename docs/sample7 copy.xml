<!-- ========================================
     Sample7 (Provider Edge 라우터) 설정 파일
     - 서비스 제공자측 라우터
     - Cisco IOS-XR 플랫폼 기반
     - 고급 기능: MPLS VPN, L2VPN, SNMP 관리
     ======================================== -->
<config xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <device>
      <!-- 장비 기본 정보 설정 -->
      <name>sample7</name>                <!-- 라우터 이름: sample7 -->
      <address>172.16.1.130</address>     <!-- 관리용 IP 주소 -->
      <port>22</port>                     <!-- SSH 접속 포트 (기본값 22) -->
      
      <!-- SSH 보안 설정 -->
      <ssh>
        <host-key>
          <algorithm>ssh-rsa</algorithm>  <!-- SSH 암호화 알고리즘: RSA -->
          <key-data>AAAAB3NzaC1yc2EAAAADAQABAAABAQDCrrx3WLQeG7qEmdHDRAU8nJ/DBgGHeQcAEdN1Dlkt
ef5d9W4wSyvrpM5Ko6FB7eBHR3NEYWxMFbKCBbEJLii8CuWObpkBTZLdsRYra2uxWKhYPC9u
9jDEM/OM2Ntt0FBOELGxMFdL8TBvqMdFbULFuL+zx/kB1yds/79kOxN4yMVt/bj2qlfQUi84
MKNJDgVszIEkYBK4c1seZFH8UocD260+MvAuWaIo79eT8hKujUGwIyN42E9XzMBGI/IUVHgE
1ginh13t7wfTubNZFdgVLuDYdhQf25s3Cou7laSW1BxweYof3A1RjXCDGcVImx/PSsH4UHut
qflMcoMETqoD</key-data>                <!-- SSH 공개키 데이터 -->
        </host-key>
      </ssh>
      
      <authgroup>kreonet</authgroup>      <!-- 인증 그룹: kreonet -->
      
      <!-- 장비 타입 및 프로토콜 설정 -->
      <device-type>
        <cli>
          <!-- NED (Network Element Driver): Cisco IOS-XR CLI 드라이버 -->
          <ned-id xmlns:cisco-iosxr-cli-7.69="http://tail-f.com/ns/ned-id/cisco-iosxr-cli-7.69">cisco-iosxr-cli-7.69:cisco-iosxr-cli-7.69</ned-id>
          <protocol>ssh</protocol>       <!-- 관리 프로토콜: SSH -->
        </cli>
      </device-type>
      
      <!-- 장비 상태 -->
      <state>
        <admin-state>unlocked</admin-state>  <!-- 관리상태: 활성화 -->
      </state>
      
      <!-- ========================================
           실제 라우터 설정 부분 시작
           ======================================== -->
      <config>
        <!-- ========================================
             관리자 설정 (AAA + 시스템 관리)
             ======================================== -->
        <admin xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <!-- FPD (Field Programmable Device) 설정 -->
          <fpd>
            <auto-upgrade>
              <status>disable</status>    <!-- 자동 업그레이드: 비활성화 -->
            </auto-upgrade>
          </fpd>
          
          <!-- 디스크 상태 모니터링 임계값 설정 -->
          <disk_status_config>
            <minor>80</minor>             <!-- 경고 수준: 80% -->
            <severe>90</severe>           <!-- 심각 수준: 90% -->
            <critical>95</critical>       <!-- 위험 수준: 95% -->
          </disk_status_config>
          
          <!-- 메모리 상태 모니터링 임계값 설정 -->
          <memory_status_config>
            <minor>80</minor>             <!-- 경고 수준: 80% -->
            <severe>90</severe>           <!-- 심각 수준: 90% -->
            <critical>95</critical>       <!-- 위험 수준: 95% -->
            <recovery_enabled>false</recovery_enabled>  <!-- 자동 복구: 비활성화 -->
          </memory_status_config>
          
          <!-- ========================================
               AAA (인증, 권한, 감사) 설정
               ======================================== -->
          <aaa>
            <!-- 사용자 인증 설정 -->
            <authentication>
              <!-- 사용자 계정 정의 -->
              <users>
                <user>
                  <name>nso</name>        <!-- 사용자명: nso -->
                  <uid>9000</uid>         <!-- 사용자 ID: 9000 -->
                  <gid>100</gid>          <!-- 그룹 ID: 100 -->
                  <password>$1$mUZJ$QPpVX3QwNEtq0gZBajM8T1</password>  <!-- 암호화된 패스워드 -->
                  <ssh_keydir>/var/confd/homes/nso/.ssh</ssh_keydir>      <!-- SSH 키 디렉토리 -->
                  <homedir>/var/confd/homes/nso</homedir>                 <!-- 홈 디렉토리 -->
                </user>
              </users>
              
              <!-- 사용자 그룹 정의 -->
              <groups>
                <!-- AAA 읽기 전용 그룹 -->
                <group>
                  <name>aaa-r</name>      <!-- 그룹명: aaa-r -->
                  <gid>100</gid>          <!-- 그룹 ID: 100 -->
                  <users>%%__system_user__%%</users>  <!-- 시스템 사용자 포함 -->
                </group>
                
                <!-- 관리자 읽기 전용 그룹 -->
                <group>
                  <name>admin-r</name>    <!-- 그룹명: admin-r -->
                  <gid>100</gid>          <!-- 그룹 ID: 100 -->
                  <users>%%__system_user__%%</users>  <!-- 시스템 사용자 포함 -->
                </group>
                
                <!-- 루트 시스템 그룹 (최고 권한) -->
                <group>
                  <name>root-system</name> <!-- 그룹명: root-system -->
                  <gid>100</gid>          <!-- 그룹 ID: 100 -->
                  <users>%%__system_user__%%</users>  <!-- 시스템 사용자 포함 -->
                  <users>nso</users>      <!-- nso 사용자도 포함 -->
                </group>
              </groups>
            </authentication>
            
            <!-- 권한 설정 -->
            <authorization>
              <!-- 명령어 실행 권한 규칙 -->
              <cmdrules>
                <!-- 규칙 1: root-system 그룹은 모든 명령 실행 가능 -->
                <cmdrule>1</cmdrule>
                <context>*</context>     <!-- 모든 컨텍스트 -->
                <command>*</command>     <!-- 모든 명령 -->
                <group>root-system</group>
                <ops>rx</ops>            <!-- 읽기+실행 권한 -->
                <action>accept</action>  <!-- 허용 -->
              </cmdrules>
              
              <!-- 규칙 2: aaa-r 그룹은 AAA 설정 조회만 가능 -->
              <cmdrules>
                <cmdrule>2</cmdrule>
                <context>*</context>
                <command>show running-config aaa</command>
                <group>aaa-r</group>
                <ops>rx</ops>
                <action>accept</action>
              </cmdrules>
              
              <!-- 규칙 3: aaa-r 그룹은 AAA 기술지원 정보 조회 가능 -->
              <cmdrules>
                <cmdrule>3</cmdrule>
                <context>*</context>
                <command>show tech-support aaa</command>
                <group>aaa-r</group>
                <ops>rx</ops>
                <action>accept</action>
              </cmdrules>
              
              <!-- 규칙 4: aaa-r 그룹은 AAA 상태 조회 가능 -->
              <cmdrules>
                <cmdrule>4</cmdrule>
                <context>*</context>
                <command>show aaa</command>
                <group>aaa-r</group>
                <ops>rx</ops>
                <action>accept</action>
              </cmdrules>
              
              <!-- 규칙 5: admin-r 그룹은 모든 show 명령 실행 가능 -->
              <cmdrules>
                <cmdrule>5</cmdrule>
                <context>*</context>
                <command>show</command>
                <group>admin-r</group>
                <ops>rx</ops>
                <action>accept</action>
              </cmdrules>
              
              <!-- 데이터 접근 권한 규칙 -->
              <datarules>
                <!-- 규칙 1: root-system은 모든 데이터 읽기/쓰기/실행 가능 -->
                <datarule>1</datarule>
                <namespace>*</namespace>
                <context>*</context>
                <keypath>*</keypath>
                <group>root-system</group>
                <ops>rwx</ops>           <!-- 읽기+쓰기+실행 권한 -->
                <action>accept</action>
              </datarules>
              
              <!-- 규칙 2: aaa-r은 AAA 데이터만 읽기 가능 -->
              <datarules>
                <datarule>2</datarule>
                <namespace>*</namespace>
                <context>*</context>
                <keypath>/aaa</keypath>
                <group>aaa-r</group>
                <ops>r</ops>             <!-- 읽기 전용 -->
                <action>accept</action>
              </datarules>
              
              <!-- 규칙 3: admin-r은 AAA 데이터 접근 거부 -->
              <datarules>
                <datarule>3</datarule>
                <namespace>*</namespace>
                <context>*</context>
                <keypath>/aaa</keypath>
                <group>admin-r</group>
                <ops>rwx</ops>
                <action>reject</action>  <!-- 거부 -->
              </datarules>
              
              <!-- 규칙 4: admin-r은 루트 경로 읽기 가능 -->
              <datarules>
                <datarule>4</datarule>
                <namespace>*</namespace>
                <context>*</context>
                <keypath>/</keypath>
                <group>admin-r</group>
                <ops>r</ops>
                <action>accept</action>
              </datarules>
            </authorization>
          </aaa>
          
          <!-- ========================================
               ConfD 관리 설정
               ======================================== -->
          <confdConfig>
            <cli>
              <timezone>local</timezone>  <!-- 시간대: 로컬 -->
              <utcOffset>0</utcOffset>    <!-- UTC 오프셋: 0 -->
              <idleTimeout>10m</idleTimeout>  <!-- 유휴 타임아웃: 10분 -->
              <timestamp>
                <enabled/>              <!-- 타임스탬프 활성화 -->
              </timestamp>
            </cli>
          </confdConfig>
          
          <!-- ========================================
               SDR (Service Domain Router) 설정
               ======================================== -->
          <sdr>
            <name>default-sdr</name>      <!-- SDR 이름: default-sdr -->
            <resources>
              <!-- 라인 카드 리소스 설정 -->
              <card-type>
                <name>LC</name>           <!-- 카드 타입: Line Card -->
                <vm-cpu>1</vm-cpu>        <!-- 가상 CPU: 1개 -->
                <vm-memory>1</vm-memory>  <!-- 가상 메모리: 1GB -->
              </card-type>
              
              <!-- 라우트 프로세서 리소스 설정 -->
              <card-type>
                <name>RP</name>           <!-- 카드 타입: Route Processor -->
                <vm-cpu>1</vm-cpu>        <!-- 가상 CPU: 1개 -->
                <vm-memory>2</vm-memory>  <!-- 가상 메모리: 2GB -->
              </card-type>
            </resources>
            <location>
              <name>all</name>            <!-- 위치: 모든 슬롯 -->
            </location>
          </sdr>
          
          <!-- CLI 서비스 설정 -->
          <service>
            <cli>
              <interactive>enabled</interactive>  <!-- 대화형 CLI 활성화 -->
            </cli>
          </service>
          
          <!-- ========================================
               SNMP 관리 설정 (상세)
               ======================================== -->
          
          <!-- SNMP 커뮤니티 설정 -->
          <SNMP-COMMUNITY-MIB>
            <snmpCommunityTable>
              <snmpCommunityEntry>
                <snmpCommunityIndex>public</snmpCommunityIndex>         <!-- 커뮤니티 인덱스 -->
                <snmpCommunityName>public</snmpCommunityName>           <!-- 커뮤니티 이름: public -->
                <snmpCommunitySecurityName>public</snmpCommunitySecurityName>  <!-- 보안 이름 -->
                <snmpCommunityContextEngineID>80:00:61:81:05:01</snmpCommunityContextEngineID>  <!-- 엔진 ID -->
                <snmpCommunityContextName></snmpCommunityContextName>   <!-- 컨텍스트 이름 (공백) -->
                <snmpCommunityTransportTag></snmpCommunityTransportTag> <!-- 전송 태그 (공백) -->
                <snmpCommunityStorageType>permanent</snmpCommunityStorageType>  <!-- 저장소 타입: 영구 -->
              </snmpCommunityEntry>
            </snmpCommunityTable>
          </SNMP-COMMUNITY-MIB>
          
          <!-- SNMP 알림 설정 -->
          <SNMP-NOTIFICATION-MIB>
            <snmpNotifyTable>
              <!-- SNMPv1 트랩 설정 -->
              <snmpNotifyEntry>
                <snmpNotifyName>std_v1_trap</snmpNotifyName>     <!-- 알림 이름 -->
                <snmpNotifyTag>std_v1_trap</snmpNotifyTag>       <!-- 알림 태그 -->
                <snmpNotifyType>trap</snmpNotifyType>            <!-- 알림 타입: 트랩 -->
                <snmpNotifyStorageType>nonVolatile</snmpNotifyStorageType>  <!-- 저장소 타입 -->
              </snmpNotifyEntry>
              
              <!-- SNMPv2 인폼 설정 -->
              <snmpNotifyEntry>
                <snmpNotifyName>std_v2_inform</snmpNotifyName>   <!-- 알림 이름 -->
                <snmpNotifyTag>std_v2_inform</snmpNotifyTag>     <!-- 알림 태그 -->
                <snmpNotifyType>inform</snmpNotifyType>          <!-- 알림 타입: 인폼 -->
                <snmpNotifyStorageType>nonVolatile</snmpNotifyStorageType>
              </snmpNotifyEntry>
              
              <!-- SNMPv2 트랩 설정 -->
              <snmpNotifyEntry>
                <snmpNotifyName>std_v2_trap</snmpNotifyName>
                <snmpNotifyTag>std_v2_trap</snmpNotifyTag>
                <snmpNotifyType>trap</snmpNotifyType>
                <snmpNotifyStorageType>nonVolatile</snmpNotifyStorageType>
              </snmpNotifyEntry>
              
              <!-- SNMPv3 인폼 설정 -->
              <snmpNotifyEntry>
                <snmpNotifyName>std_v3_inform</snmpNotifyName>
                <snmpNotifyTag>std_v3_inform</snmpNotifyTag>
                <snmpNotifyType>inform</snmpNotifyType>
                <snmpNotifyStorageType>nonVolatile</snmpNotifyStorageType>
              </snmpNotifyEntry>
              
              <!-- SNMPv3 트랩 설정 -->
              <snmpNotifyEntry>
                <snmpNotifyName>std_v3_trap</snmpNotifyName>
                <snmpNotifyTag>std_v3_trap</snmpNotifyTag>
                <snmpNotifyType>trap</snmpNotifyType>
                <snmpNotifyStorageType>nonVolatile</snmpNotifyStorageType>
              </snmpNotifyEntry>
            </snmpNotifyTable>
          </SNMP-NOTIFICATION-MIB>
          
          <!-- SNMP 타겟 설정 -->
          <SNMP-TARGET-MIB>
            <snmpTargetAddrTable>
              <!-- SNMPv1 타겟 -->
              <snmpTargetAddrEntry>
                <snmpTargetAddrName>127.0.0.1 v1</snmpTargetAddrName>           <!-- 타겟명 -->
                <snmpTargetAddrTDomain>1.3.6.1.6.1.1</snmpTargetAddrTDomain>    <!-- 전송 도메인 -->
                <snmpTargetAddrTAddress>127.0.0.1.19.136</snmpTargetAddrTAddress>  <!-- 타겟 주소 -->
                <snmpTargetAddrTimeout>1500</snmpTargetAddrTimeout>              <!-- 타임아웃: 1.5초 -->
                <snmpTargetAddrRetryCount>3</snmpTargetAddrRetryCount>           <!-- 재시도 횟수: 3회 -->
                <snmpTargetAddrTagList>std_v1_trap std_trap std_v1_inform std_inform</snmpTargetAddrTagList>  <!-- 태그 목록 -->
                <snmpTargetAddrParams>target_v1</snmpTargetAddrParams>           <!-- 파라미터 -->
                <snmpTargetAddrStorageType>nonVolatile</snmpTargetAddrStorageType>
                <snmpTargetAddrEngineID></snmpTargetAddrEngineID>                <!-- 엔진 ID (공백) -->
                <snmpTargetAddrTMask></snmpTargetAddrTMask>                      <!-- 전송 마스크 (공백) -->
                <snmpTargetAddrMMS>2048</snmpTargetAddrMMS>                      <!-- 최대 메시지 크기: 2048 바이트 -->
                <enabled/>                                                       <!-- 활성화 -->
              </snmpTargetAddrEntry>
              
              <!-- SNMPv2 타겟 -->
              <snmpTargetAddrEntry>
                <snmpTargetAddrName>127.0.0.1 v2</snmpTargetAddrName>
                <snmpTargetAddrTDomain>1.3.6.1.6.1.1</snmpTargetAddrTDomain>
                <snmpTargetAddrTAddress>127.0.0.1.23.112</snmpTargetAddrTAddress>
                <snmpTargetAddrTimeout>1500</snmpTargetAddrTimeout>
                <snmpTargetAddrRetryCount>3</snmpTargetAddrRetryCount>
                <snmpTargetAddrTagList>std_v2_trap std_trap std_v2_inform std_inform</snmpTargetAddrTagList>
                <snmpTargetAddrParams>target_v2</snmpTargetAddrParams>
                <snmpTargetAddrStorageType>nonVolatile</snmpTargetAddrStorageType>
                <snmpTargetAddrEngineID></snmpTargetAddrEngineID>
                <snmpTargetAddrTMask></snmpTargetAddrTMask>
                <snmpTargetAddrMMS>2048</snmpTargetAddrMMS>
                <enabled/>
              </snmpTargetAddrEntry>
              
              <!-- SNMPv3 트랩 타겟 -->
              <snmpTargetAddrEntry>
                <snmpTargetAddrName>127.0.0.1 v3</snmpTargetAddrName>
                <snmpTargetAddrTDomain>1.3.6.1.6.1.1</snmpTargetAddrTDomain>
                <snmpTargetAddrTAddress>127.0.0.1.27.88</snmpTargetAddrTAddress>
                <snmpTargetAddrTimeout>1500</snmpTargetAddrTimeout>
                <snmpTargetAddrRetryCount>3</snmpTargetAddrRetryCount>
                <snmpTargetAddrTagList>std_v3_trap std_trap</snmpTargetAddrTagList>
                <snmpTargetAddrParams>trap_target_v3</snmpTargetAddrParams>
                <snmpTargetAddrStorageType>nonVolatile</snmpTargetAddrStorageType>
                <snmpTargetAddrEngineID></snmpTargetAddrEngineID>
                <snmpTargetAddrTMask></snmpTargetAddrTMask>
                <snmpTargetAddrMMS>2048</snmpTargetAddrMMS>
                <enabled/>
              </snmpTargetAddrEntry>
              
              <!-- SNMPv3 인폼 타겟 -->
              <snmpTargetAddrEntry>
                <snmpTargetAddrName>127.0.0.1 v3.inform</snmpTargetAddrName>
                <snmpTargetAddrTDomain>1.3.6.1.6.1.1</snmpTargetAddrTDomain>
                <snmpTargetAddrTAddress>127.0.0.1.27.88</snmpTargetAddrTAddress>
                <snmpTargetAddrTimeout>1500</snmpTargetAddrTimeout>
                <snmpTargetAddrRetryCount>3</snmpTargetAddrRetryCount>
                <snmpTargetAddrTagList>std_v3_inform std_inform</snmpTargetAddrTagList>
                <snmpTargetAddrParams>inform_target_v3</snmpTargetAddrParams>
                <snmpTargetAddrStorageType>nonVolatile</snmpTargetAddrStorageType>
                <snmpTargetAddrEngineID>80:00:1f:88:04:74:65:73:74:69:6e:67</snmpTargetAddrEngineID>
                <snmpTargetAddrTMask></snmpTargetAddrTMask>
                <snmpTargetAddrMMS>2048</snmpTargetAddrMMS>
                <enabled/>
              </snmpTargetAddrEntry>
            </snmpTargetAddrTable>
            
            <!-- SNMP 타겟 파라미터 테이블 -->
            <snmpTargetParamsTable>
              <!-- SNMPv3 인폼 파라미터 -->
              <snmpTargetParamsEntry>
                <snmpTargetParamsName>inform_target_v3</snmpTargetParamsName>
                <snmpTargetParamsMPModel>3</snmpTargetParamsMPModel>             <!-- 메시지 처리 모델: SNMPv3 -->
                <snmpTargetParamsSecurityModel>3</snmpTargetParamsSecurityModel> <!-- 보안 모델: USM -->
                <snmpTargetParamsSecurityName>remote</snmpTargetParamsSecurityName>  <!-- 보안 이름 -->
                <snmpTargetParamsSecurityLevel>noAuthNoPriv</snmpTargetParamsSecurityLevel>  <!-- 보안 수준 -->
                <snmpTargetParamsStorageType>nonVolatile</snmpTargetParamsStorageType>
              </snmpTargetParamsEntry>
              
              <!-- SNMPv1 파라미터 -->
              <snmpTargetParamsEntry>
                <snmpTargetParamsName>target_v1</snmpTargetParamsName>
                <snmpTargetParamsMPModel>0</snmpTargetParamsMPModel>             <!-- 메시지 처리 모델: SNMPv1 -->
                <snmpTargetParamsSecurityModel>1</snmpTargetParamsSecurityModel> <!-- 보안 모델: v1 -->
                <snmpTargetParamsSecurityName>public</snmpTargetParamsSecurityName>
                <snmpTargetParamsSecurityLevel>noAuthNoPriv</snmpTargetParamsSecurityLevel>
                <snmpTargetParamsStorageType>nonVolatile</snmpTargetParamsStorageType>
              </snmpTargetParamsEntry>
              
              <!-- SNMPv2 파라미터 -->
              <snmpTargetParamsEntry>
                <snmpTargetParamsName>target_v2</snmpTargetParamsName>
                <snmpTargetParamsMPModel>1</snmpTargetParamsMPModel>             <!-- 메시지 처리 모델: SNMPv2c -->
                <snmpTargetParamsSecurityModel>2</snmpTargetParamsSecurityModel> <!-- 보안 모델: v2c -->
                <snmpTargetParamsSecurityName>public</snmpTargetParamsSecurityName>
                <snmpTargetParamsSecurityLevel>noAuthNoPriv</snmpTargetParamsSecurityLevel>
                <snmpTargetParamsStorageType>nonVolatile</snmpTargetParamsStorageType>
              </snmpTargetParamsEntry>
              
              <!-- SNMPv3 트랩 파라미터 -->
              <snmpTargetParamsEntry>
                <snmpTargetParamsName>trap_target_v3</snmpTargetParamsName>
                <snmpTargetParamsMPModel>3</snmpTargetParamsMPModel>
                <snmpTargetParamsSecurityModel>3</snmpTargetParamsSecurityModel>
                <snmpTargetParamsSecurityName>public</snmpTargetParamsSecurityName>
                <snmpTargetParamsSecurityLevel>noAuthNoPriv</snmpTargetParamsSecurityLevel>
                <snmpTargetParamsStorageType>nonVolatile</snmpTargetParamsStorageType>
              </snmpTargetParamsEntry>
            </snmpTargetParamsTable>
          </SNMP-TARGET-MIB>
          
          <!-- SNMP 사용자 기반 보안 모델 -->
          <SNMP-USER-BASED-SM-MIB>
            <usmUserTable>
              <!-- 기본 사용자 -->
              <usmUserEntry>
                <usmUserEngineID>80:00:61:81:05:01</usmUserEngineID>
                <usmUserName>initial</usmUserName>                        <!-- 사용자명: initial -->
                <usmUserSecurityName>initial</usmUserSecurityName>        <!-- 보안 이름 -->
                <usmUserAuthProtocol>1.3.6.1.6.3.10.1.1.1</usmUserAuthProtocol>  <!-- 인증 프로토콜 -->
                <usmUserPrivProtocol>1.3.6.1.6.3.10.1.2.1</usmUserPrivProtocol>  <!-- 암호화 프로토콜 -->
                <usmUserStorageType>nonVolatile</usmUserStorageType>
              </usmUserEntry>
              
              <!-- 인증 사용자 -->
              <usmUserEntry>
                <usmUserEngineID>80:00:61:81:05:01</usmUserEngineID>
                <usmUserName>initial_auth</usmUserName>                   <!-- 사용자명: initial_auth -->
                <usmUserSecurityName>initial_auth</usmUserSecurityName>
                <usmUserAuthProtocol>1.3.6.1.6.3.10.1.1.2</usmUserAuthProtocol>  <!-- MD5 인증 -->
                <usmUserPrivProtocol>1.3.6.1.6.3.10.1.2.1</usmUserPrivProtocol>
                <usmUserStorageType>nonVolatile</usmUserStorageType>
                <usmUserAuthKey>10:2c:bd:65:e3:eb:e2:16:0d:63:db:23:73:f3:17:b2</usmUserAuthKey>  <!-- 인증키 -->
              </usmUserEntry>
              
              <!-- 인증+암호화 사용자 -->
              <usmUserEntry>
                <usmUserEngineID>80:00:61:81:05:01</usmUserEngineID>
                <usmUserName>initial_authPriv</usmUserName>               <!-- 사용자명: initial_authPriv -->
                <usmUserSecurityName>initial_authPriv</usmUserSecurityName>
                <usmUserAuthProtocol>1.3.6.1.6.3.10.1.1.2</usmUserAuthProtocol>  <!-- MD5 인증 -->
                <usmUserPrivProtocol>1.3.6.1.6.3.10.1.2.2</usmUserPrivProtocol>  <!-- DES 암호화 -->
                <usmUserStorageType>nonVolatile</usmUserStorageType>
                <usmUserAuthKey>10:2c:bd:65:e3:eb:e2:16:0d:63:db:23:73:f3:17:b2</usmUserAuthKey>
                <usmUserPrivKey>10:2c:bd:65:e3:eb:e2:16:0d:63:db:23:73:f3:17:b2</usmUserPrivKey>  <!-- 암호화키 -->
              </usmUserEntry>
            </usmUserTable>
          </SNMP-USER-BASED-SM-MIB>
          
          <!-- SNMP 뷰 기반 접근 제어 -->
          <SNMP-VIEW-BASED-ACM-MIB>
            <!-- 보안-그룹 매핑 테이블 -->
            <vacmSecurityToGroupTable>
              <!-- SNMPv1 public 사용자를 all-rights 그룹에 매핑 -->
              <vacmSecurityToGroupEntry>
                <vacmSecurityModel>1</vacmSecurityModel>                  <!-- 보안 모델: SNMPv1 -->
                <vacmSecurityName>public</vacmSecurityName>               <!-- 보안 이름: public -->
                <vacmGroupName>all-rights</vacmGroupName>                 <!-- 그룹: all-rights -->
                <vacmSecurityToGroupStorageType>nonVolatile</vacmSecurityToGroupStorageType>
              </vacmSecurityToGroupEntry>
              
              <!-- SNMPv2c public 사용자를 all-rights 그룹에 매핑 -->
              <vacmSecurityToGroupEntry>
                <vacmSecurityModel>2</vacmSecurityModel>                  <!-- 보안 모델: SNMPv2c -->
                <vacmSecurityName>public</vacmSecurityName>
                <vacmGroupName>all-rights</vacmGroupName>
                <vacmSecurityToGroupStorageType>nonVolatile</vacmSecurityToGroupStorageType>
              </vacmSecurityToGroupEntry>
              
              <!-- SNMPv3 initial 사용자들을 initial 그룹에 매핑 -->
              <vacmSecurityToGroupEntry>
                <vacmSecurityModel>3</vacmSecurityModel>                  <!-- 보안 모델: SNMPv3 -->
                <vacmSecurityName>initial</vacmSecurityName>
                <vacmGroupName>initial</vacmGroupName>
                <vacmSecurityToGroupStorageType>nonVolatile</vacmSecurityToGroupStorageType>
              </vacmSecurityToGroupEntry>
              
              <vacmSecurityToGroupEntry>
                <vacmSecurityModel>3</vacmSecurityModel>
                <vacmSecurityName>initial_auth</vacmSecurityName>
                <vacmGroupName>initial</vacmGroupName>
                <vacmSecurityToGroupStorageType>nonVolatile</vacmSecurityToGroupStorageType>
              </vacmSecurityToGroupEntry>
              
              <vacmSecurityToGroupEntry>
                <vacmSecurityModel>3</vacmSecurityModel>
                <vacmSecurityName>initial_authPriv</vacmSecurityName>
                <vacmGroupName>initial</vacmGroupName>
                <vacmSecurityToGroupStorageType>nonVolatile</vacmSecurityToGroupStorageType>
              </vacmSecurityToGroupEntry>
            </vacmSecurityToGroupTable>
            
            <!-- 접근 권한 테이블 -->
            <vacmAccessTable>
              <!-- initial 그룹의 noAuthNoPriv 접근 권한 -->
              <vacmAccessEntry>
                <vacmGroupName>initial</vacmGroupName>
                <vacmAccessContextPrefix></vacmAccessContextPrefix>       <!-- 컨텍스트 접두사 (공백) -->
                <vacmAccessSecurityModel>3</vacmAccessSecurityModel>
                <vacmAccessSecurityLevel>noAuthNoPriv</vacmAccessSecurityLevel>  <!-- 보안 수준 -->
                <vacmAccessContextMatch>exact</vacmAccessContextMatch>    <!-- 정확한 컨텍스트 매칭 -->
                <vacmAccessReadViewName>internet</vacmAccessReadViewName> <!-- 읽기 뷰: internet -->
                <vacmAccessWriteViewName>internet</vacmAccessWriteViewName>  <!-- 쓰기 뷰: internet -->
                <vacmAccessNotifyViewName>internet</vacmAccessNotifyViewName>  <!-- 알림 뷰: internet -->
                <vacmAccessStorageType>nonVolatile</vacmAccessStorageType>
              </vacmAccessEntry>
              
              <!-- initial 그룹의 authNoPriv 접근 권한 -->
              <vacmAccessEntry>
                <vacmGroupName>initial</vacmGroupName>
                <vacmAccessContextPrefix></vacmAccessContextPrefix>
                <vacmAccessSecurityModel>3</vacmAccessSecurityModel>
                <vacmAccessSecurityLevel>authNoPriv</vacmAccessSecurityLevel>  <!-- 인증만, 암호화 없음 -->
                <vacmAccessContextMatch>exact</vacmAccessContextMatch>
                <vacmAccessReadViewName>internet</vacmAccessReadViewName>
                <vacmAccessWriteViewName>internet</vacmAccessWriteViewName>
                <vacmAccessNotifyViewName>internet</vacmAccessNotifyViewName>
                <vacmAccessStorageType>nonVolatile</vacmAccessStorageType>
              </vacmAccessEntry>
              
              <!-- initial 그룹의 authPriv 접근 권한 -->
              <vacmAccessEntry>
                <vacmGroupName>initial</vacmGroupName>
                <vacmAccessContextPrefix></vacmAccessContextPrefix>
                <vacmAccessSecurityModel>3</vacmAccessSecurityModel>
                <vacmAccessSecurityLevel>authPriv</vacmAccessSecurityLevel>    <!-- 인증+암호화 -->
                <vacmAccessContextMatch>exact</vacmAccessContextMatch>
                <vacmAccessReadViewName>internet</vacmAccessReadViewName>
                <vacmAccessWriteViewName>internet</vacmAccessWriteViewName>
                <vacmAccessNotifyViewName>internet</vacmAccessNotifyViewName>
                <vacmAccessStorageType>nonVolatile</vacmAccessStorageType>
              </vacmAccessEntry>
              
              <!-- all-rights 그룹의 접근 권한 -->
              <vacmAccessEntry>
                <vacmGroupName>all-rights</vacmGroupName>
                <vacmAccessContextPrefix></vacmAccessContextPrefix>
                <vacmAccessSecurityModel>0</vacmAccessSecurityModel>      <!-- 모든 보안 모델 -->
                <vacmAccessSecurityLevel>noAuthNoPriv</vacmAccessSecurityLevel>
                <vacmAccessContextMatch>exact</vacmAccessContextMatch>
                <vacmAccessReadViewName>internet</vacmAccessReadViewName>
                <vacmAccessWriteViewName>internet</vacmAccessWriteViewName>
                <vacmAccessNotifyViewName>internet</vacmAccessNotifyViewName>
                <vacmAccessStorageType>nonVolatile</vacmAccessStorageType>
              </vacmAccessEntry>
            </vacmAccessTable>
            
            <!-- 뷰 트리 패밀리 테이블 -->
            <vacmViewTreeFamilyTable>
              <vacmViewTreeFamilyEntry>
                <vacmViewTreeFamilyViewName>internet</vacmViewTreeFamilyViewName>  <!-- 뷰 이름: internet -->
                <vacmViewTreeFamilySubtree>1.3.6.1</vacmViewTreeFamilySubtree>    <!-- 서브트리: 1.3.6.1 (인터넷 OID) -->
                <vacmViewTreeFamilyMask></vacmViewTreeFamilyMask>                 <!-- 마스크 (공백) -->
                <vacmViewTreeFamilyType>included</vacmViewTreeFamilyType>         <!-- 포함 -->
                <vacmViewTreeFamilyStorageType>nonVolatile</vacmViewTreeFamilyStorageType>
              </vacmViewTreeFamilyEntry>
            </vacmViewTreeFamilyTable>
          </SNMP-VIEW-BASED-ACM-MIB>
          
          <!-- SNMPv2 MIB 설정 -->
          <SNMPv2-MIB>
            <system>
              <sysContact></sysContact>           <!-- 시스템 연락처 (공백) -->
              <sysName></sysName>                 <!-- 시스템 이름 (공백) -->
              <sysLocation></sysLocation>         <!-- 시스템 위치 (공백) -->
            </system>
            <snmp>
              <snmpEnableAuthenTraps>disabled</snmpEnableAuthenTraps>  <!-- 인증 트랩: 비활성화 -->
            </snmp>
          </SNMPv2-MIB>
        </admin>
        
        <!-- ========================================
             VRF (Virtual Routing and Forwarding) 설정
             - MPLS VPN 서비스를 위한 가상 라우팅 테이블
             ======================================== -->
        <vrf xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <vrf-list>
            <name>exam-l3vpn</name>               <!-- VRF 이름: exam-l3vpn -->
            <description>None</description>       <!-- VRF 설명 -->
            <address-family>
              <ipv4>
                <unicast>
                  <!-- 라우트 임포트 설정 -->
                  <import>
                    <route-target>
                      <address-list>
                        <name>65000:1000</name>   <!-- 임포트 RT: 65000:1000 -->
                      </address-list>
                    </route-target>
                  </import>
                  
                  <!-- 라우트 익스포트 설정 -->
                  <export>
                    <route-target>
                      <address-list>
                        <name>65000:1000</name>   <!-- 익스포트 RT: 65000:1000 -->
                      </address-list>
                    </route-target>
                  </export>
                </unicast>
              </ipv4>
            </address-family>
          </vrf-list>
        </vrf>
        
        <!-- ========================================
             사용자 계정 설정 (IOS-XR 방식)
             ======================================== -->
        <username xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <name>nso</name>                       <!-- 사용자명: nso -->
          <group>
            <name>cisco-support</name>           <!-- 소속 그룹: cisco-support -->
          </group>
          <group>
            <name>root-lr</name>                 <!-- 소속 그룹: root-lr -->
          </group>
          <secret>
            <encryption>5</encryption>           <!-- 암호화 타입: MD5 -->
            <password>$1$mUZJ$QPpVX3QwNEtq0gZBajM8T1</password>  <!-- 암호화된 패스워드 -->
          </secret>
        </username>
        
        <!-- ========================================
             SSH 서버 설정
             ======================================== -->
        <ssh xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <server>
            <netconf>
              <vrf>
                <name>default</name>             <!-- NETCONF VRF: default -->
              </vrf>
            </netconf>
            <vrf>
              <name>default</name>               <!-- SSH VRF: default -->
            </vrf>
          </server>
        </ssh>
        
        <!-- ========================================
             네트워크 인터페이스 설정
             ======================================== -->
        <interface xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <!-- Loopback 0: 라우터 ID용 루프백 인터페이스 -->
          <Loopback>
            <id>0</id>                           <!-- 인터페이스 ID: 0 -->
            <ipv4>
              <address>
                <ip>1.1.1.1</ip>                 <!-- IP 주소: 1.1.1.1 -->
                <mask>255.255.255.255</mask>     <!-- 서브넷 마스크: /32 -->
              </address>
            </ipv4>
          </Loopback>
          
          <!-- 관리 이더넷 인터페이스 -->
          <MgmtEth>
            <id>0/RP0/CPU0/0</id>                <!-- 관리 이더넷 인터페이스 -->
            <ipv4>
              <address>
                <ip>172.16.1.130</ip>            <!-- 관리 IP: 172.16.1.130 -->
                <mask>255.255.255.0</mask>       <!-- 서브넷 마스크: /24 -->
              </address>
            </ipv4>
          </MgmtEth>
          
          <!-- GigabitEthernet 0/0/0/0: 코어 네트워크 연결 -->
          <GigabitEthernet>
            <id>0/0/0/0</id>                     <!-- 인터페이스 ID -->
            <description>Core-facing interface</description>  <!-- 인터페이스 설명 -->
            <ipv4>
              <address>
                <ip>10.1.13.1</ip>               <!-- IP 주소: 10.1.13.1 -->
                <mask>255.255.255.0</mask>       <!-- 서브넷 마스크: /24 -->
              </address>
            </ipv4>
          </GigabitEthernet>
          
          <!-- GigabitEthernet 0/0/0/2: 다른 PE 라우터 연결 -->
          <GigabitEthernet>
            <id>0/0/0/2</id>
            <ipv4>
              <address>
                <ip>10.1.15.1</ip>               <!-- IP 주소: 10.1.15.1 -->
                <mask>255.255.255.0</mask>
              </address>
            </ipv4>
          </GigabitEthernet>
          
          <!-- GigabitEthernet 0/0/0/3: 사용하지 않는 인터페이스 -->
          <GigabitEthernet>
            <id>0/0/0/3</id>
            <shutdown/>                          <!-- 인터페이스 비활성화 -->
          </GigabitEthernet>
          
          <!-- ========================================
               서브인터페이스 설정
               ======================================== -->
          <GigabitEthernet-subinterface>
            <!-- L2 전송용 서브인터페이스 -->
            <GigabitEthernet>
              <id>0/0/0/0.1</id>                 <!-- 서브인터페이스 ID -->
              <mode>l2transport</mode>           <!-- 모드: L2 전송 -->
              <mtu>1522</mtu>                    <!-- MTU: 1522 바이트 -->
              <encapsulation>
                <default/>                       <!-- 기본 캡슐화 -->
              </encapsulation>
            </GigabitEthernet>
            
            <!-- VLAN 100 서브인터페이스 (VRF 연결) -->
            <GigabitEthernet>
              <id>0/0/0/1.100</id>               <!-- 서브인터페이스 ID -->
              <description>CE-facing subinterface</description>  <!-- 설명: CE 연결용 -->
              <encapsulation>
                <dot1q>
                  <vlan-id>100</vlan-id>         <!-- VLAN ID: 100 -->
                </dot1q>
              </encapsulation>
              <vrf>exam-l3vpn</vrf>              <!-- VRF: exam-l3vpn -->
              <ipv4>
                <address>
                  <ip>192.168.1.10</ip>          <!-- IP 주소: 192.168.1.10 -->
                  <mask>255.255.255.0</mask>
                </address>
              </ipv4>
            </GigabitEthernet>
          </GigabitEthernet-subinterface>
        </interface>
        
        <!-- ========================================
             L2VPN (Layer 2 VPN) 설정
             - 계층 2 VPN 서비스 제공
             ======================================== -->
        <l2vpn xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <!-- PW (Pseudowire) 클래스 정의 -->
          <pw-class>
            <name>PWClass_13_30-30-30-30</name>  <!-- PW 클래스 이름 -->
            <encapsulation>
              <mpls/>                            <!-- 캡슐화: MPLS -->
            </encapsulation>
          </pw-class>
          
          <!-- 크로스 커넥트 설정 -->
          <xconnect>
            <group>
              <name>L2VPN_Group</name>           <!-- L2VPN 그룹 이름 -->
              <p2p>
                <name>P2P_sample7_sample9</name> <!-- P2P 연결 이름 -->
                <interface>
                  <name>GigabitEthernet0/0/0/0.1</name>  <!-- 연결 인터페이스 -->
                </interface>
                <neighbor>
                  <address>3.3.3.3</address>     <!-- 원격 PE IP: 3.3.3.3 -->
                  <pw-id>13</pw-id>              <!-- Pseudowire ID: 13 -->
                  <ip-version>ipv4</ip-version>  <!-- IP 버전: IPv4 -->
                  <pw-class>PWClass_13_30-30-30-30</pw-class>  <!-- PW 클래스 -->
                </neighbor>
              </p2p>
            </group>
          </xconnect>
        </l2vpn>
        
        <!-- ========================================
             라우팅 프로토콜 설정
             ======================================== -->
        <router xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <!-- OSPF 설정 -->
          <ospf>
            <name>1</name>                       <!-- OSPF 프로세스 ID: 1 -->
            <area>
              <id>0</id>                         <!-- OSPF 영역: 0 (백본 영역) -->
              
              <!-- OSPF에 참여하는 인터페이스들 -->
              <interface>
                <name>GigabitEthernet0/0/0/0</name>  <!-- 코어 연결 인터페이스 -->
              </interface>
              <interface>
                <name>GigabitEthernet0/0/0/2</name>  <!-- PE 간 연결 인터페이스 -->
              </interface>
              <interface>
                <name>Loopback0</name>           <!-- 루프백 인터페이스 -->
              </interface>
            </area>
          </ospf>
          
          <!-- BGP 설정 -->
          <bgp>
            <bgp-no-instance>
              <id>65000</id>                     <!-- BGP AS 번호: 65000 -->
              
              <!-- VPNv4 주소 패밀리 활성화 -->
              <address-family>
                <vpnv4>
                  <unicast/>                     <!-- VPNv4 유니캐스트 -->
                </vpnv4>
              </address-family>
              
              <!-- BGP 이웃 라우터들 (IBGP) -->
              <neighbor>
                <id>2.2.2.2</id>                 <!-- 이웃 PE 라우터: 2.2.2.2 -->
                <remote-as>65000</remote-as>     <!-- 같은 AS: 65000 (IBGP) -->
                <update-source>
                  <Loopback>0</Loopback>         <!-- 업데이트 소스: Loopback0 -->
                </update-source>
                <address-family>
                  <vpnv4>
                    <unicast/>                   <!-- VPNv4 활성화 -->
                  </vpnv4>
                </address-family>
              </neighbor>
              
              <neighbor>
                <id>3.3.3.3</id>                 <!-- 이웃 PE 라우터: 3.3.3.3 -->
                <remote-as>65000</remote-as>
                <update-source>
                  <Loopback>0</Loopback>
                </update-source>
                <address-family>
                  <vpnv4>
                    <unicast/>
                  </vpnv4>
                </address-family>
              </neighbor>
              
              <neighbor>
                <id>4.4.4.4</id>                 <!-- 이웃 PE 라우터: 4.4.4.4 -->
                <remote-as>65000</remote-as>
                <update-source>
                  <Loopback>0</Loopback>
                </update-source>
                <address-family>
                  <vpnv4>
                    <unicast/>
                  </vpnv4>
                </address-family>
              </neighbor>
              
              <!-- VRF별 BGP 설정 -->
              <vrf>
                <name>exam-l3vpn</name>          <!-- VRF 이름: exam-l3vpn -->
                <rd>65000:1000</rd>              <!-- Route Distinguisher: 65000:1000 -->
                <address-family>
                  <ipv4>
                    <unicast>
                      <!-- 라우트 재분배 설정 -->
                      <redistribute>
                        <connected/>             <!-- 직접 연결된 라우트 재분배 -->
                        <static/>                <!-- 정적 라우트 재분배 -->
                      </redistribute>
                    </unicast>
                  </ipv4>
                </address-family>
                
                <!-- CE 라우터와의 BGP 피어링 -->
                <neighbor>
                  <id>192.168.1.11</id>          <!-- CE 라우터 IP: 192.168.1.11 -->
                  <remote-as>65001</remote-as>   <!-- CE AS 번호: 65001 (EBGP) -->
                  <address-family>
                    <ipv4>
                      <unicast/>                 <!-- IPv4 유니캐스트 -->
                    </ipv4>
                  </address-family>
                </neighbor>
              </vrf>
            </bgp-no-instance>
          </bgp>
        </router>
        
        <!-- ========================================
             MPLS (Multi-Protocol Label Switching) 설정
             ======================================== -->
        <mpls xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <ldp>                                  <!-- LDP (Label Distribution Protocol) -->
            <!-- LDP를 활성화할 인터페이스들 -->
            <interface>
              <name>GigabitEthernet0/0/0/0</name>  <!-- 코어 네트워크 인터페이스 -->
            </interface>
            <interface>
              <name>GigabitEthernet0/0/0/2</name>  <!-- PE 간 연결 인터페이스 -->
            </interface>
          </ldp>
        </mpls>
        
        <!-- ========================================
             Call Home 서비스 설정
             - Cisco 기술지원을 위한 자동 알림 서비스
             ======================================== -->
        <call-home xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <service>
            <active/>                            <!-- Call Home 서비스 활성화 -->
          </service>
          <contact>
            <smart-licensing/>                   <!-- Smart Licensing 연락처 -->
          </contact>
          <profile>
            <name>CiscoTAC-1</name>              <!-- 프로파일 이름 -->
            <active/>                            <!-- 프로파일 활성화 -->
            <destination>
              <transport-method>
                <http/>                          <!-- 전송 방법: HTTP -->
              </transport-method>
            </destination>
          </profile>
        </call-home>
        
        <!-- 기타 시스템 설정 -->
        <xyzroot xmlns="http://tail-f.com/ned/cisco-ios-xr">0</xyzroot>  <!-- xyzroot 값: 0 -->
      </config>
    </device>
  </devices>
</config>
