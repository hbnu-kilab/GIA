<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="ruleGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#10b981;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#047857;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="enhancedGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#7c3aed;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="coreGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#374151;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1f2937;stop-opacity:1" />
    </linearGradient>
    <filter id="agentShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="3" dy="3" stdDeviation="5" flood-opacity="0.4"/>
    </filter>
    <marker id="arrowRed" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc2626"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#047857"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#7c3aed"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2563eb"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="#f8fafc"/>

  <!-- Title -->
  <text x="700" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="24" font-weight="bold" fill="#1e293b">
    5개 핵심 에이전트 + 2-Track 병렬 처리 시스템
  </text>

  <!-- Central Data Source -->
  <g transform="translate(550, 80)">
    <rect width="300" height="80" rx="15" fill="url(#coreGrad)" filter="url(#agentShadow)"/>
    <text x="150" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">
      📊 Network Facts (공통 데이터)
    </text>
    <text x="150" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#d1d5db">
      XML 파싱 결과 • 8개 장비 • 35개 메트릭
    </text>
    <text x="150" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9ca3af">
      모든 에이전트가 공유하는 기반 데이터
    </text>
  </g>

  <!-- Track A: Rule-based (LEFT SIDE) -->
  <rect x="50" y="200" width="580" height="500" rx="20" fill="#ecfdf5" stroke="#10b981" stroke-width="3"/>
  <text x="340" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#047857">
    🚀 Track A: Rule-based 직접 처리 (고속)
  </text>

  <!-- Agent 1: Rule Generator -->
  <g transform="translate(80, 260)">
    <rect width="170" height="90" rx="12" fill="url(#ruleGrad)" filter="url(#agentShadow)"/>
    <text x="85" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      🤖 Rule Generator
    </text>
    <text x="85" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      35개 메트릭 템플릿
    </text>
    <text x="85" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      기초 질문 대량 생성
    </text>
    <text x="85" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      ✅ 정확성 보장
    </text>
  </g>

  <!-- Agent 2: Command Agent -->
  <g transform="translate(280, 260)">
    <rect width="170" height="90" rx="12" fill="#2563eb" filter="url(#agentShadow)"/>
    <text x="85" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      ⌨️ Command Agent
    </text>
    <text x="85" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      CLI 명령어 전문
    </text>
    <text x="85" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      SSH, 진단 스크립트
    </text>
    <text x="85" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      ✅ 실무 중심
    </text>
  </g>

  <!-- Test Assembler -->
  <g transform="translate(180, 380)">
    <rect width="170" height="70" rx="10" fill="#059669" stroke="#047857" stroke-width="2"/>
    <text x="85" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
      🔧 Test Assembler
    </text>
    <text x="85" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      질문-메트릭 매핑
    </text>
    <text x="85" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      BuilderCore 호출
    </text>
  </g>

  <!-- BuilderCore (Left) -->
  <g transform="translate(180, 480)">
    <rect width="170" height="100" rx="12" fill="url(#coreGrad)" filter="url(#agentShadow)"/>
    <text x="85" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      ⚙️ BuilderCore
    </text>
    <text x="85" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d1d5db">
      직접 메트릭 실행
    </text>
    <text x="85" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9ca3af">
      즉시 답변 계산
    </text>
    <text x="85" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9ca3af">
      Ground Truth 생성
    </text>
    <text x="85" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#6b7280">
      Answer Agent 거치지 않음
    </text>
  </g>

  <!-- Track B: Enhanced (RIGHT SIDE) -->
  <rect x="770" y="200" width="580" height="500" rx="20" fill="#faf5ff" stroke="#8b5cf6" stroke-width="3"/>
  <text x="1060" y="230" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#7c3aed">
    🧠 Track B: Enhanced 에이전트 처리 (고품질)
  </text>

  <!-- Agent 3: Enhanced Generator -->
  <g transform="translate(800, 260)">
    <rect width="180" height="90" rx="12" fill="url(#enhancedGrad)" filter="url(#agentShadow)"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      🧠 Enhanced Generator
    </text>
    <text x="90" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      5×6 복잡도×페르소나
    </text>
    <text x="90" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      Reasoning Plan 생성
    </text>
    <text x="90" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      ✅ 창의성 확보
    </text>
  </g>

  <!-- Agent 4: Quality Assessor -->
  <g transform="translate(1020, 260)">
    <rect width="180" height="90" rx="12" fill="#ef4444" filter="url(#agentShadow)"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      🔍 Quality Assessor
    </text>
    <text x="90" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      15점 만점 평가
    </text>
    <text x="90" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      12점 이상만 승인
    </text>
    <text x="90" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      ✅ 품질 보장
    </text>
  </g>

  <!-- Agent 5: Answer Agent -->
  <g transform="translate(900, 380)">
    <rect width="200" height="110" rx="12" fill="#7c3aed" filter="url(#agentShadow)"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      🎯 Answer Agent
    </text>
    <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
      Reasoning Plan 실행
    </text>
    <text x="100" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      Enhanced 질문만 처리
    </text>
    <text x="100" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      BuilderCore 단계별 호출
    </text>
    <text x="100" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      ✅ 증거 기반 답변
    </text>
  </g>

  <!-- BuilderCore (Right) -->
  <g transform="translate(1120, 380)">
    <rect width="160" height="110" rx="12" fill="url(#coreGrad)" filter="url(#agentShadow)"/>
    <text x="80" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">
      ⚙️ BuilderCore
    </text>
    <text x="80" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#d1d5db">
      메트릭 실행 엔진
    </text>
    <text x="80" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">
      양쪽 Track 모두 사용
    </text>
    <text x="80" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">
      Track A: 직접 호출
    </text>
    <text x="80" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">
      Track B: Agent 경유
    </text>
  </g>

  <!-- Final Integration Agent -->
  <g transform="translate(550, 750)">
    <rect width="300" height="80" rx="15" fill="#1f2937" filter="url(#agentShadow)"/>
    <text x="150" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      📋 Question Reviewer (통합 관리자)
    </text>
    <text x="150" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d1d5db">
      양쪽 Track 결과 통합 • 최종 품질 검토
    </text>
    <text x="150" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9ca3af">
      휴리스틱 필터링 + LLM 평가 → 고품질 데이터셋
    </text>
  </g>

  <!-- Data Flow Arrows -->
  
  <!-- From Network Facts to Track A -->
  <line x1="600" y1="160" x2="165" y2="260" stroke="#10b981" stroke-width="4" marker-end="url(#arrowGreen)"/>
  <line x1="650" y1="160" x2="365" y2="260" stroke="#2563eb" stroke-width="4" marker-end="url(#arrowBlue)"/>

  <!-- From Network Facts to Track B -->
  <line x1="750" y1="160" x2="890" y2="260" stroke="#8b5cf6" stroke-width="4" marker-end="url(#arrowPurple)"/>
  <line x1="800" y1="160" x2="1110" y2="260" stroke="#ef4444" stroke-width="4" marker-end="url(#arrowRed)"/>

  <!-- Track A Internal Flow -->
  <!-- Rule + Command → Test Assembler -->
  <line x1="165" y1="350" x2="220" y2="380" stroke="#047857" stroke-width="3" marker-end="url(#arrowGreen)"/>
  <line x1="365" y1="350" x2="320" y2="380" stroke="#2563eb" stroke-width="3" marker-end="url(#arrowBlue)"/>

  <!-- Test Assembler → BuilderCore -->
  <line x1="265" y1="450" x2="265" y2="480" stroke="#047857" stroke-width="4" marker-end="url(#arrowGreen)"/>

  <!-- Track B Internal Flow -->
  <!-- Enhanced → Quality Assessor -->
  <line x1="980" y1="300" x2="1020" y2="300" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrowPurple)"/>

  <!-- Quality Assessor → Answer Agent -->
  <line x1="1110" y1="350" x2="1050" y2="380" stroke="#ef4444" stroke-width="3" marker-end="url(#arrowRed)"/>

  <!-- Answer Agent ↔ BuilderCore -->
  <line x1="1100" y1="430" x2="1120" y2="430" stroke="#7c3aed" stroke-width="4" marker-end="url(#arrowPurple)"/>
  <line x1="1120" y1="450" x2="1100" y2="450" stroke="#374151" stroke-width="4" marker-end="url(#arrowGreen)"/>

  <!-- Both Tracks → Question Reviewer -->
  <line x1="350" y1="580" x2="600" y2="750" stroke="#10b981" stroke-width="5" marker-end="url(#arrowGreen)"/>
  <line x1="1000" y1="490" x2="750" y2="750" stroke="#8b5cf6" stroke-width="5" marker-end="url(#arrowPurple)"/>

  <!-- Process Labels -->
  <g transform="translate(80, 600)">
    <rect width="200" height="60" rx="10" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
    <text x="100" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#047857">
      ✅ 즉시 완성
    </text>
    <text x="100" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      질문 + BuilderCore 직접 계산
    </text>
    <text x="100" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      = 완성된 Q&A (Answer Agent 없음)
    </text>
  </g>

  <g transform="translate(950, 520)">
    <rect width="200" height="60" rx="10" fill="#f3e8ff" stroke="#8b5cf6" stroke-width="2"/>
    <text x="100" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#7c3aed">
      ✅ 심화 분석
    </text>
    <text x="100" y="35" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b21a8">
      질문 → 품질검증 → Agent 처리
    </text>
    <text x="100" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#6b21a8">
      = 고품질 분석 Q&A
    </text>
  </g>

  <!-- Key Differences Box -->
  <g transform="translate(50, 850)">
    <rect width="650" height="120" rx="15" fill="#fef2f2" stroke="#dc2626" stroke-width="2"/>
    <text x="325" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#991b1b">
      🎯 핵심 차이점: Rule vs Enhanced
    </text>
    <text x="50" y="50" font-family="Arial, sans-serif" font-size="11" fill="#7f1d1d">
      <tspan font-weight="bold">Track A (Rule-based):</tspan> 질문 생성 → BuilderCore 직접 → 답변 완성 (3단계)
    </text>
    <text x="50" y="70" font-family="Arial, sans-serif" font-size="11" fill="#7f1d1d">
      <tspan font-weight="bold">Track B (Enhanced):</tspan> 질문 생성 → 품질검증 → Answer Agent → 답변 완성 (5단계)
    </text>
    <text x="50" y="90" font-family="Arial, sans-serif" font-size="11" fill="#7f1d1d">
      <tspan font-weight="bold">결과:</tspan> Track A는 속도+정확성, Track B는 품질+복잡성 → 상호보완
    </text>
    <text x="50" y="110" font-family="Arial, sans-serif" font-size="11" fill="#7f1d1d">
      <tspan font-weight="bold">Answer Agent:</tspan> Enhanced 질문만 처리! Rule 질문은 BuilderCore 직접!
    </text>
  </g>

  <!-- Statistics Box -->
  <g transform="translate(720, 850)">
    <rect width="350" height="120" rx="15" fill="#ecfef1" stroke="#10b981" stroke-width="2"/>
    <text x="175" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#047857">
      📊 처리 통계 (실제)
    </text>
    <text x="30" y="50" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      <tspan font-weight="bold">Track A:</tspan> ~500개 질문 × 직접 처리 = 5분 완료
    </text>
    <text x="30" y="70" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      <tspan font-weight="bold">Track B:</tspan> ~200개 질문 × 에이전트 처리 = 15분 완료
    </text>
    <text x="30" y="90" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      <tspan font-weight="bold">총 병렬:</tspan> 15분 (순차 시 20분) → 25% 성능 향상
    </text>
    <text x="30" y="110" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      <tspan font-weight="bold">품질:</tspan> Rule(99.8%) + Enhanced(92.8%) = 종합 96.3%
    </text>
  </g>

  <!-- Parallel Processing Indicator -->
  <g transform="translate(340, 680)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#dc2626">⚡ 병렬 처리</text>
    <text x="120" y="0" font-family="Arial, sans-serif" font-size="12" fill="#374151">+</text>
    <text x="140" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#8b5cf6">🧠 에이전트 협력</text>
    <text x="290" y="0" font-family="Arial, sans-serif" font-size="12" fill="#374151">=</text>
    <text x="310" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#059669">💎 최고 품질</text>
  </g>

  <!-- Flow Labels -->
  <text x="400" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#10b981">
    Direct Processing (빠름)
  </text>
  <text x="1000" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#8b5cf6">
    Agent Processing (정밀)
  </text>

  <!-- Agent collaboration indicators -->
  <text x="890" y="375" font-family="Arial, sans-serif" font-size="9" fill="#7c3aed" transform="rotate(-30 890 375)">
    검증된 질문만
  </text>
  <text x="1110" y="415" font-family="Arial, sans-serif" font-size="9" fill="#374151" transform="rotate(-45 1110 415)">
    증거 요청
  </text>
  <text x="1130" y="435" font-family="Arial, sans-serif" font-size="9" fill="#374151" transform="rotate(45 1130 435)">
    메트릭 결과
  </text>

</svg>" font-size="9" fill="#e5e7eb">
      Stage 2에서 실행
    </text>
  </g>

  <!-- Agent 2: Command Agent -->
  <g transform="translate(280, 250)">
    <rect width="160" height="100" rx="12" fill="url(#agentGrad1)" filter="url(#agentShadow)"/>
    <text x="80" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      ⌨️ Command Agent
    </text>
    <text x="80" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      CLI 명령어 전문
    </text>
    <text x="80" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      SSH, 진단 명령어
    </text>
    <text x="80" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      자동화 스크립트
    </text>
    <text x="80" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e5e7eb">
      Stage 2와 병렬
    </text>
  </g>

  <!-- Agent 3: Enhanced Generator -->
  <g transform="translate(480, 250)">
    <rect width="180" height="100" rx="12" fill="url(#agentGrad3)" filter="url(#agentShadow)"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      🧠 Enhanced Generator
    </text>
    <text x="90" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      5×6 템플릿 조합
    </text>
    <text x="90" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      Reasoning Plan 생성
    </text>
    <text x="90" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      전문가 관점 질문
    </text>
    <text x="90" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e5e7eb">
      Stage 3에서 실행
    </text>
  </g>

  <!-- Agent 4: Quality Assessor -->
  <g transform="translate(720, 250)">
    <rect width="180" height="100" rx="12" fill="url(#agentGrad4)" filter="url(#agentShadow)"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      🔍 Quality Assessor
    </text>
    <text x="90" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      15점 만점 평가
    </text>
    <text x="90" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      복잡도+명확성+실용성
    </text>
    <text x="90" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      12점 이상 승인
    </text>
    <text x="90" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e5e7eb">
      Stage 3에서 검증
    </text>
  </g>

  <!-- Agent 5: Answer Agent -->
  <g transform="translate(350, 420)">
    <rect width="200" height="120" rx="12" fill="url(#agentGrad5)" filter="url(#agentShadow)"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      🎯 Answer Agent
    </text>
    <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
      Reasoning Plan 실행
    </text>
    <text x="100" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
      BuilderCore 연동
    </text>
    <text x="100" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
      증거 수집 + 답변 합성
    </text>
    <text x="100" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">
      Temperature=0.0
    </text>
    <text x="100" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e5e7eb">
      Stage 4 핵심 에이전트
    </text>
  </g>

  <!-- Agent 6: Intent Inspector -->
  <g transform="translate(600, 420)">
    <rect width="180" height="120" rx="12" fill="#4f46e5" filter="url(#agentShadow)"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      🕵️ Intent Inspector
    </text>
    <text x="90" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      답변 정확성 검증
    </text>
    <text x="90" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      XML 데이터 대조
    </text>
    <text x="90" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      타입별 일치 검사
    </text>
    <text x="90" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      오류 전파 차단
    </text>
    <text x="90" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e5e7eb">
      Stage 4-5 검증
    </text>
  </g>

  <!-- Agent 7: Question Reviewer -->
  <g transform="translate(50, 600)">
    <rect width="180" height="100" rx="12" fill="#059669" filter="url(#agentShadow)"/>
    <text x="90" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      📋 Question Reviewer
    </text>
    <text x="90" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      통합 최종 검토
    </text>
    <text x="90" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      휴리스틱 + LLM
    </text>
    <text x="90" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      10점 품질 평가
    </text>
    <text x="90" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e5e7eb">
      Stage 5 통합 관리
    </text>
  </g>

  <!-- Agent 8: Comprehensive Evaluator -->
  <g transform="translate(280, 600)">
    <rect width="200" height="100" rx="12" fill="#dc2626" filter="url(#agentShadow)"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      📊 Comprehensive Evaluator
    </text>
    <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      다층 평가 메트릭
    </text>
    <text x="100" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      EM, F1, BLEU, ROUGE
    </text>
    <text x="100" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">
      자가 평가 수행
    </text>
    <text x="100" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#e5e7eb">
      Stage 6 최종 평가
    </text>
  </g>

  <!-- BuilderCore (Central Engine) -->
  <g transform="translate(950, 350)">
    <rect width="160" height="140" rx="12" fill="#374151" filter="url(#agentShadow)"/>
    <text x="80" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">
      ⚙️ BuilderCore
    </text>
    <text x="80" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d1d5db">
      분석 엔진
    </text>
    <text x="80" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#9ca3af">
      35개 메트릭 실행
    </text>
    <text x="80" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">
      • BGP 분석
    </text>
    <text x="80" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">
      • VRF 일관성
    </text>
    <text x="80" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">
      • 보안 정책
    </text>
    <text x="80" y="125" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#9ca3af">
      • 토폴로지 분석
    </text>
  </g>

  <!-- Data Flow Arrows -->
  
  <!-- From Central Hub to Agents -->
  <line x1="600" y1="180" x2="140" y2="250" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="650" y1="200" x2="360" y2="250" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="700" y1="200" x2="570" y2="250" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="750" y1="180" x2="810" y2="250" stroke="#475569" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Agent Interactions -->
  
  <!-- Rule → Command (병렬) -->
  <line x1="230" y1="300" x2="280" y2="300" stroke="#10b981" stroke-width="3"/>
  <text x="255" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#047857">병렬</text>

  <!-- Enhanced → Quality Assessor -->
  <line x1="660" y1="300" x2="720" y2="300" stroke="#f59e0b" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="690" y="295" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#d97706">검증</text>

  <!-- All → Answer Agent -->
  <line x1="140" y1="350" x2="400" y2="420" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="360" y1="350" x2="420" y2="420" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="570" y1="350" x2="480" y2="420" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrowhead)"/>
  <line x1="810" y1="350" x2="500" y2="420" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrowhead)"/>

  <!-- Answer Agent → BuilderCore -->
  <line x1="550" y1="480" x2="950" y2="420" stroke="#8b5cf6" stroke-width="4" stroke-dasharray="5,5"/>
  <text x="750" y="445" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7c3aed">증거 수집</text>

  <!-- BuilderCore → Answer Agent -->
  <line x1="950" y1="440" x2="550" y2="500" stroke="#374151" stroke-width="4" stroke-dasharray="5,5"/>
  <text x="750" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#374151">메트릭 결과</text>

  <!-- Answer Agent → Intent Inspector -->
  <line x1="550" y1="480" x2="600" y2="480" stroke="#8b5cf6" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="575" y="475" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#7c3aed">답변</text>

  <!-- Intent Inspector → Question Reviewer -->
  <line x1="600" y1="540" x2="200" y2="600" stroke="#4f46e5" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="400" y="565" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#4f46e5">검증된 답변</text>

  <!-- Question Reviewer → Comprehensive Evaluator -->
  <line x1="230" y1="650" x2="280" y2="650" stroke="#059669" stroke-width="3" marker-end="url(#arrowhead)"/>
  <text x="255" y="645" text-anchor="middle" font-family="Arial, sans-serif" font-size="9" fill="#047857">최종</text>

  <!-- Data flow labels -->
  <g transform="translate(100, 380)">
    <rect width="120" height="30" rx="8" fill="#fef3c7" stroke="#f59e0b"/>
    <text x="60" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#92400e">
      기초 질문 생성
    </text>
  </g>

  <g transform="translate(750, 380)">
    <rect width="120" height="30" rx="8" fill="#fee2e2" stroke="#dc2626"/>
    <text x="60" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#b91c1c">
      심화 질문 검증
    </text>
  </g>

  <g transform="translate(500, 570)">
    <rect width="160" height="30" rx="8" fill="#f3e8ff" stroke="#8b5cf6"/>
    <text x="80" y="20" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#7c3aed">
      증거 기반 답변 생성
    </text>
  </g>

  <!-- Stage Labels -->
  <rect x="20" y="200" width="100" height="25" rx="5" fill="#1e293b"/>
  <text x="70" y="217" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Stage 2-3</text>

  <rect x="320" y="380" width="100" height="25" rx="5" fill="#1e293b"/>
  <text x="370" y="397" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Stage 4</text>

  <rect x="50" y="560" width="100" height="25" rx="5" fill="#1e293b"/>
  <text x="100" y="577" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">Stage 5-6</text>

  <!-- Quality Gates -->
  <g transform="translate(1150, 200)">
    <rect width="200" height="150" rx="12" fill="#fee2e2" stroke="#dc2626" stroke-width="2"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#991b1b">
      🚨 품질 관리 게이트
    </text>
    <text x="100" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">
      Gate 1: 휴리스틱 필터 (35% 제거)
    </text>
    <text x="100" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">
      Gate 2: LLM 품질 평가 (35% 제거)
    </text>
    <text x="100" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">
      Gate 3: Enhanced 전용 (37% 제거)
    </text>
    <text x="100" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#7f1d1d">
      Gate 4: 답변 정확성 (10% 제거)
    </text>
    <text x="100" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="#991b1b">
      → 총 70% 품질 관리
    </text>
  </g>

  <!-- Performance Metrics -->
  <g transform="translate(1150, 400)">
    <rect width="200" height="120" rx="12" fill="#ecfdf5" stroke="#10b981" stroke-width="2"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#047857">
      📈 성능 지표
    </text>
    <text x="100" y="50" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      처리 속도: 1000질문/시간
    </text>
    <text x="100" y="70" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      정확도: 95%+ (EM 기준)
    </text>
    <text x="100" y="90" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      일관성: 99%+ (Format 기준)
    </text>
    <text x="100" y="110" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="#065f46">
      재현성: 100% (자동화)
    </text>
  </g>

  <!-- Communication Patterns -->
  <g transform="translate(520, 750)">
    <rect width="360" height="80" rx="12" fill="#1f2937" stroke="#4b5563" stroke-width="2"/>
    <text x="180" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">
      🔄 에이전트 협력 패턴
    </text>
    <text x="180" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d1d5db">
      순차적 처리: Generator → Assessor → Agent → Inspector
    </text>
    <text x="180" y="60" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d1d5db">
      병렬 처리: Rule Generator ∥ Command Agent
    </text>
    <text x="180" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#d1d5db">
      피드백 루프: Inspector ↺ Agent (오류 시 재처리)
    </text>
  </g>

  <!-- Arrow marker definition -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#475569"/>
    </marker>
  </defs>

</svg>